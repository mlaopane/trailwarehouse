{# TrailWarehouse > AppBundle > Resources > views > Shop > family.html.twig #}

{% extends "TrailWarehouseAppBundle::layout.html.twig" %}


{% block title %}
  {{ parent() }} : {{ family.name | capitalize }}
{% endblock %}

{% block javascripts %}
  {{ parent() }}
  <script src="{{ asset('bower_components/angular/angular.min.js') }}"></script>
{% endblock %}

{% block page_main %}
  <main id="page-family" class="page" data-ng-app="app">

    <!-- # Family -->
    <div class="family container bg-whitegrey px-2 py-3 mb-4" data-ng-controller="familyCtrl as page">

      <div id="ng-data">
        <input type="hidden" data-ng-init="page.API_URL = '{{ url('app_api_product_get_all') }}'">
        <input type="hidden" data-ng-init="page.ASSET_URL = '{{ asset('') }}'">
        <input type="hidden" data-ng-init="page.family_id = '{{ family.id }}'">
      </div>

      <div class="row px-0 px-lg-3 px-xl-5">

        <!-- # Product Image -->
        <div class="image-container flex justify-content-center col-12 col-lg-6 col-xl-5 py-2 px-xl-2">
          <div class="p-4">
            <img id="image"
              data-ng-src="{% verbatim %}{{ (page.ASSET_URL + 'images/no_picture.png') }}{% endverbatim %}"
              alt="">
          </div>
        </div>
        <!-- Product # -->

        <!-- # Product Data -->
        <div class="col-12 col-lg-6 col-xl-7 py-2 px-xl-2">

          <!-- # Card -->
          <div class="card">
            {% if product is null %}
              <div class="ness-block warning my-3 mx-auto">
                <span>Aucun produit disponible</span>
              </div>
            {% else %}
              <!-- # Card header -->
              <div class="card-header">

                <!-- # Nav Tabs -->
                <ul class="nav nav-tabs card-header-tabs">
                  <li class="nav-item">
                    <a class="nav-link active" href="#features">Caractéristiques</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#reviews">Commentaires(2)</a>
                  </li>
                </ul>
                <!-- Nav Tabs # -->

              </div>
              <!-- Card header # -->

              <!-- # Card Block -->
              <div class="card-block">

                <!-- # Tab panes -->
                <div class="tab-content">

                  <!-- # Pane Features -->
                  <div class="tab-pane active" id="features" role="tabpanel">

                    <!-- # Card Title -->
                    <div class="card-title">
                      <h3 class="justify-content-center">{{ product.family.name | capitalize }} - {{ product.family.brand.name | upper }}</h3>
                    </div>
                    <!-- Card Title # -->

                    <!-- # Card Text -->
                    <div class="card-text">

                      <!-- # Row -->
                      <div class="row">
                        <!-- # Col 1 -->
                        <div class="col-6">

                          <!-- # Stock -->
                          <div id="stock" class="">
                            <div class="text-success" data-ng-cloak
                              data-ng-if="page.product.stock >= 10">
                              <span>Disponible</span>&nbsp;<span class="glyphicon glyphicon-ok"></span>
                            </div>
                            <div class="text-warning" data-ng-cloak
                              data-ng-bind="'Quantité disponible : ' + page.product.stock"
                              data-ng-if="page.product.stock > 0 && page.product.stock < 10">
                            </div>
                            <div class="text-danger" data-ng-cloak
                              data-ng-if="page.product.stock == 0">
                              Produit indisponible
                            </div>
                          </div>
                          <!-- Stock # -->

                          <!-- # Price -->
                          <div id="price">
                            <strong>€&nbsp;<span class="text-success"></span> {{ product.price }}</strong>
                          </div>
                          <!-- Price # -->

                        </div>


                        <!-- # Col 2 -->
                        <div class="col-6">

                          <!-- # Colors -->
                          <div id="colors" class="mb-3">
                            {% if colors is not empty %}
                            <ul class="color-list">
                              {% for color in colors %}
                              <li class="color-sample-container">
                                <div data-id-color="{{ color.id }}"
                                  data-ng-click="page.getProductsByColor({{ family.id }}, {{ color.id }}, page.product.size.id)"
                                  class="color-sample"
                                  style="background:{{ color.value }}">
                                </div>
                              </li>
                              {% endfor %}
                            </ul>
                            {% endif %}
                          </div>
                          <!-- Colors # -->

                          <!-- # Sizes -->
                          <div id="sizes" class="">
                            {% if sizes is not empty %}
                            <div class="ness-option-container w-50">
                              <ul class="ness-option-group">
                                {% for size in sizes %}
                                <li id="size-{{ size.id }}"
                                  data-ng-class="!page.sizes || page.sizes[{{ size.id }}] ? 'ness-option ness-option-md w-100' : 'ness-option ness-option-md w-100 disabled'">
                                  <div class="size-option"
                                    data-ng-if="!page.sizes || page.sizes[{{ size.id }}]"
                                    data-ng-click="page.getProductBy({{ family.id }}, page.product.color.id, {{ size.id }})">
                                      {{ (size.value | upper) ~ ' ' ~ size.unitShortcut }}
                                  </div>
                                  <div class="size-option"
                                    data-ng-if="page.sizes && !page.sizes[{{ size.id }}]">
                                      {{ (size.value | upper) ~ ' ' ~ size.unitShortcut }}
                                  </div>
                                </li>
                                {% endfor %}
                              </ul>
                            </div>
                            {% endif %}
                          </div>
                          <!-- Sizes # -->

                        </div>

                      </div>
                      <!-- Row # -->

                      <div class="row">
                        <!-- # Description -->
                        <div id="description" class="col-12">
                          {{ family.description }}
                        </div>
                        <!-- Description # -->
                      </div>
                    </div>
                    <!-- Card Text # -->

                  </div>
                  <!-- Pane Features # -->

                  <!-- # Pane Reviews -->
                  <div class="tab-pane" id="reviews" role="tabpanel">

                    <!-- # Card Title -->
                    <div class="card-title">
                      <h4 class="col-12 justify-content-center">Titre du commentaire</h4>
                      <p class="blockquote">Note</p>
                    </div>
                    <!-- Card Title # -->

                    <!-- # Card Text -->
                    <div class="card-text">
                      <p>Pas de commentaire pour le moment</p>
                    </div>
                    <!-- Card Text # -->

                  </div>
                  <!-- Pane Reviews # -->

                </div>
                <!-- Tab panes # -->


              </div>
              <!-- Card Block # -->

            {% endif %}
          </div>
        </div>
        <!-- Product Data # -->

      </div>

    </div>
    <!-- Family # -->
  </main>
{% endblock %}

{% block additional_javascripts %}
  <script src="{{ asset('js/app-common.js') }}"></script>
  <script src="{{ asset('js/family.js') }}"></script>
{% endblock %}
